{% extends 'core/base_game.html' %}

{% block game_content %}
    {% if admin_user and not player %}
        <section class="warning-section">
            <p>
                Because you are not logged in as a player, you can only see (part of) this page, but not submit an answer.
            </p>
        </section>
    {% endif %}

    <section>
        {% if answer_submitted %}
            <p>Your answer has been submitted, thanks!</p>

            <p>
                You will be redirected soon to the {{ game.game_config.long_name }} page.
                If not, <a href="{% url 'numbers_game:index' session.url_tag game.url_tag %}">click here</a>!
            </p>

            <script>
                function redirect() {
                    window.location.href = "{% url 'numbers_game:index' session.url_tag game.url_tag %}";
                }
                setTimeout(redirect, 3000);
            </script>
        {% else %}
            {% if not current_answer %}
                <p>
                    Fill out the form below to submit your answer to the {{ game.game_config.long_name }}.
                    The "answer" field should be a rational number with a dot separator (with the
                    <a href="https://docs.python.org/3/tutorial/floatingpoint.html" target="_blank">
                        limitations</a> of a Python float). Please also write one or two sentences to explain
                    the reasoning you have used to come up with your answer.
                </p>

                {% if submission_error %}
                    <section class="form-error-message">
                        <p>Your answer raised the following error. Contact the administrator to solve the problem.</p>

                        <p>{{ submission_error }}</p>
                    </section>
                {% endif %}

                {% if submit_answer_form %}
                    <form action="{% url 'numbers_game:submit_answer' session.url_tag game.url_tag %}" method="post">
                        {% include "include/form_table_template.html" with form=submit_answer_form form_type="submit_answer" submit_button_label='Submit your Answer' %}
                    </form>
                {% endif %}
            {% else %}
                <p>
                    You have already submitted the answer {{ current_answer.formatted_answer }}.
                    You cannot submit more than one answer for this game.
                </p>
            {% endif %}
        {% endif %}
    </section>
{% endblock %}

{% block game_navigation %}
    <div class="side-by-side-centered-wrapper">
        {% include 'include/game_navigation_home.html' %}
        {% include 'include/game_navigation_team.html' %}
    </div>
{% endblock %}
