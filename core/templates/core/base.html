{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    {% include 'include/head_base_content.html' %}
    <title>{% block title %}Game Server{% endblock %}</title>
    {% if user_is_authenticated %}
        <script src="{% static 'js/side_panel.js' %}"></script>
    {% endif %}
    {% block extra_head %}{% endblock %}
</head>

<body>
    <header id="main-header">
        {% block header %}{% endblock %}
    </header>


    <main>
        <div id="main-panel" class="{% if show_side_panel %}truncated-main{% else %}full-main{% endif %}">
            {% if not show_side_panel and user_is_authenticated %}
                <p class="center-align">
                    <a class="button" href="{% url 'core:logout' %}?next={{ session_portal_url }}">Logout</a>
                </p>
            {% endif %}
            {% block content %}{% endblock %}
        </div>

        {% if show_side_panel %}

            <div id="side-panel-toggle-out" class="side-panel-toggle">&#9654;</div>
            <div id="side-panel" class="side-panel">

                <h3>
                    {{ user.display_name }}
                    <span class="logout-button"><a class="button" href="{% url 'core:logout' %}{% block logout_next %}{% endblock %}">Logout</a></span>
                    <div id="side-panel-toggle-in" class="side-panel-toggle"><span>&#9664;</span></div>
                </h3>

            {% if not user_is_only_guest %}
                <div class="side-panel-content">
                    {% if not user_is_only_guest %}
                        <p class="center-align"><a class="button process-button" href="{% url 'core:change_password' user.id %}">Change your Password</a></p>
                    {% endif %}
                    {% if not user_is_only_player %}
                        <p class="center-align"><a class="button process-button" href="{% url 'core:user_profile' user.id %}">View/Edit your profile</a></p>
                    {% endif %}
                </div>
            {% endif %}

                    <nav>
                        <h3>Navigation</h3>

                        <div class="nav-content">
                            {% block side_panel_extra_nav %}
                            {% endblock %}

                            {% if not user_is_only_player %}
                                {% include 'include/sidepanel_nav_main.html' %}
                                {% include 'include/sidepanel_nav_other_sessions.html' %}
                            {% endif %}
                        </div>
                    </nav>
                </div>
            </div>
        {% endif %}
    </main>

    <footer id="main-footer">
        <p>&copy; 2024 Simon Rey</p>
    </footer>

    {% block extra_scripts %}{% endblock %}
</body>
</html>